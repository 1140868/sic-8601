<h1>Registar</h1>
<hr><br>
<div class="col-md-6 col-md-offset-3">
  <form name="form" (ngSubmit)="f.form.valid && register()" #f="ngForm" novalidate>
    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !firstname.valid }">
      <label for="firstname">Primeiro Nome
        <br>
      </label>
      <input type="text" class="form-control" name="firstname" [(ngModel)]="model.firstname" #firstname="ngModel"
        required />
      <div *ngIf="f.submitted && !firstname.valid" class="helpblock">O nome é obrigatório</div>
    </div>

    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !lastname.valid }">
      <label for="lastname">Último Nome
        <br>
      </label>
      <input type="text" class="form-control" name="lastname" [(ngModel)]="model.lastname" #lastname="ngModel" required />
      <div *ngIf="f.submitted && !lastname.valid" class="helpblock">O Ultimo nome é obrigatório</div>
    </div>

    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !morada.valid }">
      <label for="morada">Morada
        <br>
      </label>
      <input type="text" class="form-control" name="morada" [(ngModel)]="model.morada" #morada="ngModel" required />
      <div *ngIf="f.submitted && !morada.valid" class="helpblock">A morada é obrigatória</div>
    </div>


    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !longitude.valid }">
      <label for="longitude">Longitude
        <br>
      </label>
      <input type="number" class="form-control" name="longitude" placeholder="longitude" min="1" [(ngModel)]="model.longitude"
        #longitude="ngModel" required />
      <div *ngIf="f.submitted && !longitude.valid" class="helpblock">longitude is required</div>
    </div>

    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !latitude.valid }">
      <label for="latitude">Latitude
        <br>
      </label>
      <input type="number" class="form-control" name="latitude" placeholder="latitude" min="1" [(ngModel)]="model.latitude"
        #latitude="ngModel" required />
      <div *ngIf="f.submitted && !latitude.valid" class="helpblock">latitude is required</div>
    </div>

    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !email.valid }">
      <label for="email">
        <br>Email
        <br>
      </label>
      <input type="text" class="form-control" name="email" [(ngModel)]="model.email" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
        #email="ngModel" required />
      <div *ngIf="f.submitted && !email.valid" class="helpblock">O email é obrigatório</div>
    </div>

    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !password.valid }">
      <label for="password">
        <br>Password <br>
      </label>
      <input type="password" class="form-control" name="password" [(ngModel)]="model.password" #password="ngModel"
        required />
      <div *ngIf="f.submitted && !password.valid" class="helpblock">A password é obrigatória</div>
    </div>



    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !model.validaM16 }">
      <input type="checkbox" name="validaM16" value="concordo" [(ngModel)]="model.validaM16" #validaM16="ngModel"
        required />
      <label for="validaM16"> Confirmo que tenho mais de 16 anos ou sou titular das responsabilidades parentais da
        criança.</label>
      <div *ngIf="f.submitted && !model.validaM16" class="alert alert-danger">Para utilizar este serviço tem de ter
        mais de 16 anos.</div>
    </div>

    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !model.validaDP }">
      <input type="checkbox" name="validaDP" value="concordo" [(ngModel)]="model.validaDP" #validaDP="ngModel" required />
      <label for="validaDP"> Concordo com a <a routerLink="/condicoes">Política de Privacidade</a> e que a minha
        informação pessoal seja guardada<br> com a finalidade de criar um perfil, criar e guardar listas de compras e
        guardar planificações.
      </label>
      <div *ngIf="f.submitted && !model.validaDP" class="alert alert-danger">Para utilizar este serviço tem de
        demonstrar explicitamente a sua autorização.</div>
    </div>

    <div class="form-group">
      <br>
      <button [disabled]="loading" class="btn btn-primary">Registar</button>
      <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYo
           KCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5
           mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2
           LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG
           4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAA
           AsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJ
           Z7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYum
           CYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAE
           AAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpF
           KSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojE
           MBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZ
           nFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAAL
           AAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAi
           B1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
    </div>
    <div *ngIf="error" class="alert alert-danger">{{error}}</div>
    <br> <br>
  </form>
</div>